<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>managers</title>
    <style>
        .el-table .warning-row {
            background: oldlace;
        }

        .el-table .success-row {
            background: #f0f9eb;
        }
    </style>

</head>
<body>
<div id="app">
    <h1>欢迎您</h1>
    <hr>
    <h2>功能列表</h2>
    <hr>
    <h3>员工基本信息</h3>
    <el-row>
        <el-link href="manageWorkers.html" type="success">添加、删除、查询与修改</el-link>
    </el-row>
    <hr>
    <h3>员工出勤情况记录</h3>
    <el-row>
        <el-link href="attendanceRecord.html" type="success">添加、删除、查询与修改</el-link>
    </el-row>
    <hr>
    <h3>管理请假、离职申请</h3>
    <el-row>
        <el-link href="leaveRecords.html" type="primary">请假申请</el-link>
        <el-link href="resignations.html" type="danger">离职申请</el-link>
    </el-row>
    <hr>
    <h3>管理培训活动</h3>
    <el-row>
        <el-link href="trainingActivities.html" type="success">添加、删除、查询与修改</el-link>
    </el-row>
    <hr>
    <h3>管理培训活动员工记录</h3>
    <el-row>
        <el-link href="trainingActivitiesRecords.html" type="success">添加、删除、查询与修改</el-link>
    </el-row>
    <hr>
    <h3>管理公告信息</h3>
    <el-row>
        <el-link href="announcements.html" type="success">添加、删除、查询与修改</el-link>
    </el-row>
    <hr>
    <h3>管理工资记录</h3>
    <el-row>
        <el-link href="salaryRecords.html" type="success">添加、删除、查询与修改</el-link>
    </el-row>


    <!--开除员工对话框表单-->
    <el-dialog
            :visible.sync="deleteDialogVisible"
            title="开除员工"
            width="40%"
    >

        <el-form label-width="100px" ref="form">
            <el-form-item label="开除员工id">
                <el-input v-model="deleteIds"></el-input>
            </el-form-item>
            <el-form-item>
                <el-button @click="deleteWorkers" type="primary">提交</el-button>
                <el-button @click="deleteDialogVisible = false">取消</el-button>
            </el-form-item>
        </el-form>

    </el-dialog>


</div>

<script src="js/vue.js"></script>
<script src="element-ui/lib/index.js"></script>
<link href="element-ui/lib/theme-chalk/index.css" rel="stylesheet">

<script src="js/axios-0.18.0.js"></script>
<script>
    new Vue({
        el: "#app",
        methods: {
            //添加员工
            addWorker() {
                axios({
                    method: "post",
                    url: "http://localhost:8080/ademob/managers/addWorker",
                    data: this.worker
                }).then(resp => {
                    if ("success" == resp.data) {
                        //添加成功
                        //关闭窗口
                        this.addDialogVisible = false;

                        //弹出提示，添加成功
                        this.$message({
                            message: '恭喜你，添加成功',
                            type: 'success'
                        });
                    }
                })
            },
            //开除员工
            deleteWorkers() {
                //弹出确认删除的提示框
                this.$confirm('此操作将删除该数据, 是否继续?', '提示', {
                    confirmButtonText: '确定',
                    cancelButtonText: '取消',
                    type: 'warning'
                }).then(() => {
                    //点击确认
                    axios({
                        method: "post",
                        url: "http://localhost:8080/ademob/managers/deleteWorkers",
                        data: this.deleteIds
                    }).then(resp => {
                        if ("success" == resp.data) {
                            //删除成功
                            //弹出提示
                            this.$message({
                                message: '恭喜你，删除成功',
                                type: 'success'
                            });
                        }
                        //关闭窗口
                        this.deleteDialogVisible = false;
                    })
                }).catch(() => {
                    //点击取消
                    this.$message({
                        type: 'info',
                        message: '已取消删除'
                    });
                    //关闭窗口
                    this.deleteDialogVisible = false;
                });
            },


        },
        data() {
            return {
                // 添加员工对话框是否展示的标记
                addDialogVisible: false,
                // 删除员工对话框是否展示的标记
                deleteDialogVisible: false,
                //要删除（开除）的员工的id
                deleteIds: "",
                // 员工模型数据
                worker: {
                    id: "",
                    name: "",
                    password: "",
                    trueName: "",
                    clockInHour: "",
                    clockInMinute: "",
                    clockOutHour: "",
                    clockOutHourMinute: "",
                    profilePhoto: "",
                    basicSalary: "",
                    status: "",
                    managerId: ""
                }
            }
        }
    })
</script>
</body>
</html>